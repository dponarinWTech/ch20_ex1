<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <section name="SqlUpdater.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
        </sectionGroup>
    </configSections>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.6.1"/>
    </startup>
    <applicationSettings>
        <SqlUpdater.Properties.Settings>
            <setting name="ErrorLogFile" serializeAs="String">
                <value>ErrorLog.log</value>
            </setting>
            <setting name="SP_Name" serializeAs="String">
                <value>KfxIndxRconOB_SelectRecFromOnBase</value>
            </setting>
            <setting name="SQL_GetUIDTableName" serializeAs="String">
                <value>SELECT TOP 1 keytypenum FROM OnBase.hsi.keytypetable WHERE keytype like 'SOURCE UNI%';</value>
            </setting>
            <setting name="SQL_GetAccTableName" serializeAs="String">
                <value>SELECT TOP 1 keytypenum FROM OnBase.hsi.keytypetable WHERE keytype like 'Account Nu%';</value>
            </setting>
            <setting name="SQL_GetSsnTableName" serializeAs="String">
                <value>SELECT TOP 1 keytypenum FROM OnBase.hsi.keytypetable WHERE keytype like 'SSN%';</value>
            </setting>
            <setting name="SQL_GetDateStoredTableName" serializeAs="String">
                <value>SELECT TOP 1 keytypenum FROM OnBase.hsi.keytypetable WHERE keytype like 'Date Stor%';</value>
            </setting>
            <setting name="SP_Text" serializeAs="String">
                <value>USE [OnBase]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [KfxIndxRcon_SelectRecFromOnBase]
(		
	@id_list  	list_varchar READONLY,
	@StartDate       datetime,
	@ReturnRowCounts INT OUT,
	@ReturnResult	 BIT OUT
) 
AS
BEGIN
    DECLARE @SysError       INT; 
    DECLARE @SysRowCount INT;
    SET @SysError = 0;

    SELECT a.keyvaluechar as SpStr3, b.keyvaluechar as Account,
	c.keyvaluechar as SSN, d.itemdate as DocDate
	FROM __uidTable__ a 
	  INNER JOIN __accTable__ b ON a.itemnum = b.itemnum
	  INNER JOIN __ssnTable__ c ON a.itemnum = c.itemnum
	  INNER JOIN OnBase.hsi.itemdata d ON a.itemnum = d.itemnum
	  INNER JOIN __dateTable__ e ON a.itemnum = e.itemnum
	WHERE a.keyvaluechar IN (SELECT id FROM @id_list)
	     AND e.keyvaluedate &gt;= @StartDate
    ORDER BY SpStr3;

	SELECT 	@SysError = @@ERROR, 
                @SysRowCount = @@ROWCOUNT;

	IF @SysError &lt;&gt; 0
	    BEGIN			
	        SET @ReturnResult = 0;
                        SET @ReturnRowCounts = 0;				
	        RETURN
	    END
	ELSE
	    BEGIN				
	        SET @ReturnRowCounts = @SysRowCount;
	        SET @ReturnResult = 1;						
	    END
END; 
</value>
            </setting>
        </SqlUpdater.Properties.Settings>
    </applicationSettings>
</configuration>
